jQuery("body").on('click','span.close-msg',function(a){jQuery(this).parents('.acfef-message').remove()});jQuery("body").on('input',function(a){jQuery('.acfef-message').remove()});acf.add_action("ready_field/type=relationship",function(a){a.find(".acf-button.button-primary").on("click",function(){relField=a;container=showModal(a.data("key"),a.data("form_width"));getForm(a,"add_post")});jQuery("body").find(a).on("click","a.edit-post",function(b){b.preventDefault();b.stopPropagation();relField=a;container=showModal(a.data("key"),a.data("form_width"));b=jQuery(this).parent("span.acf-rel-item").data("id");getForm(a,b)})});jQuery(".post-slug-field input").on("input",function(){var a=this.selectionStart,b=/[`~!@#$%^&*()|+=?;:..\u2019\u201c'"<>,\u20ac\u00a3\u00a5\u2022\u060c\u066b\u061f\u00bb\u00ab\s\{\}\[\]\\\/]+/gi,c=jQuery(this).val();b.test(c)&&(jQuery(this).val(c.replace(b,"").toLowerCase()),a--);this.setSelectionRange(a,a)});jQuery("body").on("click","button.edit-password",function(){jQuery(this).addClass("acfef-hidden").siblings(".pass-strength-result").removeClass("acfef-hidden").parents(".acf-field-password").removeClass("edit_password").addClass("editing_password").next(".acf-field-password").removeClass("edit_password");jQuery(this).after('<input type="hidden" name="edit_user_password" value="1"/>')});
jQuery("body").on("click","button.cancel-edit",function(){jQuery(this).siblings("button.edit-password").removeClass("acfef-hidden").siblings(".pass-strength-result").addClass("acfef-hidden").parents(".acf-field-password").addClass("edit_password").removeClass("editing_password").next(".acf-field-password").addClass("edit_password");jQuery(this).siblings("input[name=edit_user_password]").remove()});function showModal(b,f){var a=jQuery("#modal_"+b);a.length?a.removeClass("hide").addClass("show"):(a=jQuery('<div id="modal_'+b+'" class="modal edit-modal show"><div class="modal-content" style="width:'+f+'px;max-width:80%"><div class="modal-inner"><span onClick="closeModal(\''+b+'\',\'clear\')" class="acf-icon -cancel close"></span><div class="content-container"><div class="loading"><span class="acf-loading"></span></div></div></div></div></div>'),jQuery("body").append(a));return a}
function getForm(b,f){var a={action:"acfef/fields/relationship/add_form",field_key:b.data("key"),parent_form:b.parents("form").attr("id"),form_action:f};jQuery.ajax({url:acf.get("ajaxurl"),data:acf.prepareForAjax(a),type:"post",dataType:"html",success:showForm})}function showForm(b){container.find(".content-container").html(b);acf.do_action("append",container)}
jQuery("body").on("submit","form.acfef-form",function(b){b.preventDefault();$form=jQuery(this);this.blur();$form.find(".acf-spinner").css("display","block");args={form:$form,reset:!1,success:function(f){var a=jQuery('input[type="file"]:not([disabled])',f);a.each(function(c,e){0<e.files.length||jQuery(e).prop("disabled",!0)});var d=new FormData(f[0]);d.append("action","acfef/form_submit");a.prop("disabled",!1);acf.lockForm(f);jQuery.ajax({url:acf.get("ajaxurl"),type:"post",data:d,cache:!1,processData:!1,
contentType:!1,success:function(c){if(c.success){if(c.data.redirect)window.location=c.data.redirect;else if(acf.unlockForm(f),successMessage='<div class="acfef-message"><div class="acf-notice -success acf-success-message"><p class="success-msg">'+c.data.update_message+'</p><span class="acfef-dismiss close-msg acf-notice-dismiss acf-icon -cancel small"></span></div></div>',c.data.append){var e=c.data.append;"edit"==e.action?(relField.find("div.values").find("span[data-id="+e.id+"]").html(e.text+'<a href="#" class="acf-icon -minus small dark" data-name="remove_item"></a>'),
relField.find("div.choices").find("span[data-id="+e.id+"]").html(e.text)):relField.find("div.values ul").append('<li><input type="hidden" name="acf['+relField.data("key")+'][]" value="'+e.id+'" /><span data-id="'+e.id+'" class="acf-rel-item">'+e.text+'<a href="#" class="acf-icon -minus small dark" data-name="remove_item"></a></span></li>');f.replaceWith(successMessage);jQuery("body").find("#modal_"+c.data.field_key).delay(400).remove()}else f.find(".acf-spinner").css("display","none"),f.before(successMessage).find(".acfef-submit-button").attr("disabled",
!1).removeClass("acf-hidden");c.data.clear_form&&(jQuery("body, html").animate({scrollTop:f.offset({top:50})},2E3),e=f.data("widget"),f.replaceWith(c.data.clear_form),acf.do_action("append",jQuery(".elementor-element-"+e)))}}})}};acf.validateForm(args)});
jQuery(document).ready(function(){var b=jQuery("div[data-default]");jQuery.each(b,function(f,a){var d=jQuery(a),c=d.data("default"),e=d.data("dynamic_value"),l=d.find("input[type=text]");if(0<c.length){var g=function(m){var n=[m,"value"];~m.indexOf(":")&&(n=m.split(":"));return n},h=function(m,n){var k=d.siblings("div[data-name="+m+"]"),p=k.find("input");"radio"==k.data("type")&&(p=1==n?k.find("input"):k.find("input:selected"));"select"==k.data("type")&&(p=k.find("select"));return p},r=function(m,
n,k){var p="["+n[0]+"]";""!=k.val()&&(k=k.val(),"text"==n[1]&&(n=d.siblings("div[data-name="+n[0]+"]"),"radio"==n.data("type")&&(sourceInput=n.find(".selected").text()),"select"==n.data("type")&&(sourceInput=n.find(":selected").text()),k=sourceInput),m=m.replace(p,k));return m},q=e;jQuery.each(c,function(m,n){var k=g(n),p=h(k[0],!1);q=r(q,k,p);p=h(k[0],!0);p.on("input",function(){var t=e;jQuery.each(c,function(x,v){var u=g(v),w=h(u[0],!1);t=r(t,u,w)});l.val(t)})});l.val(q)}})});
(function(b){var f=acf.Field.extend({type:"upload_images",events:{"click .acf-gallery-add":"onClickAdd","click div.acf-gallery-upload":"onClickUpload","click .acf-gallery-edit":"onClickEdit","click .acf-gallery-remove":"onClickRemove","click .acf-gallery-attachment":"onClickSelect","click .acf-gallery-close":"onClickClose","change .acf-gallery-sort":"onChangeSort","click .acf-gallery-update":"onUpdate",mouseover:"onHover",showField:"render","input .images-preview":"imagesPreview"},actions:{validation_begin:"onValidationBegin",
validation_failure:"onValidationFailure",resize:"onResize"},onValidationBegin:function(){acf.disable(this.$sideData(),this.cid)},onValidationFailure:function(){acf.enable(this.$sideData(),this.cid)},$control:function(){return this.$(".acf-gallery")},$collection:function(){return this.$(".acf-gallery-attachments")},$attachments:function(){return this.$(".acf-gallery-attachment:not(.not-valid)")},$clone:function(){return this.$(".image-preview-clone")},$attachment:function(a){return this.$('.acf-gallery-attachment[data-id="'+
a+'"]')},$active:function(){return this.$(".acf-gallery-attachment.active")},$inValid:function(){return this.$(".acf-gallery-attachment.not-valid")},$main:function(){return this.$(".acf-gallery-main")},$side:function(){return this.$(".acf-gallery-side")},$sideData:function(){return this.$(".acf-gallery-side-data")},isFull:function(){var a=parseInt(this.get("max")),d=this.$attachments().length;return a&&d>=a},getValue:function(){var a=[];this.$attachments().each(function(){a.push(b(this).data("id"))});
return a.length?a:!1},addUnscopedEvents:function(a){this.on("change",".acf-gallery-side",function(d){a.onUpdate(d,b(this))})},addSortable:function(a){this.$collection().sortable({items:".acf-gallery-attachment",forceHelperSize:!0,forcePlaceholderSize:!0,scroll:!0,start:function(d,c){c.placeholder.html(c.item.html());c.placeholder.removeAttr("style")},update:function(d,c){a.$input().trigger("change")}});this.$control().resizable({handles:"s",minHeight:200,stop:function(d,c){acf.update_user_setting("gallery_height",
c.size.height)}})},initialize:function(){this.addUnscopedEvents(this);this.render()},render:function(){var a=this.$(".acf-gallery-sort"),d=this.$(".acf-gallery-add"),c=this.$attachments().length;this.isFull()?d.addClass("disabled"):d.removeClass("disabled");c?a.removeClass("disabled"):a.addClass("disabled");this.resize()},resize:function(){var a=this.$control().width();a=Math.round(a/150);a=Math.min(a,8);this.$control().attr("data-columns",a)},onResize:function(){this.resize()},openSidebar:function(){this.$control().addClass("-open");
var a=this.$control().width()/3;a=parseInt(a);a=Math.max(a,350);this.$(".acf-gallery-side-inner").css({width:a-1});this.$side().animate({width:a-1},250);this.$main().animate({right:a},250)},closeSidebar:function(){this.$control().removeClass("-open");this.$active().removeClass("active");acf.disable(this.$side());var a=this.$(".acf-gallery-side-data");this.$main().animate({right:0},250);this.$side().animate({width:0},250,function(){a.html("")})},onClickAdd:function(a,d){this.$control().css("height",
"400");this.isFull()?this.showNotice({text:acf.__("Maximum selection reached"),type:"warning"}):acf.newMediaPopup({mode:"select",title:acf.__("Add Image to Gallery"),field:this.get("key"),multiple:"add",library:this.get("library"),allowedTypes:this.get("mime_types"),selected:this.val(),select:b.proxy(function(c,e){this.appendAttachment(c,e)},this)})},imagesPreview:function(a,d){var c=this;this.$control().css("height","400");var e=this.$attachments().length,l=this.$control().data("max"),g=a.currentTarget.files;
Object.keys(g).forEach(function(h){if(e>=l)return!1;var r=g[h],q=new FileReader;q.onload=function(m){m=c.$clone().clone();m.removeClass("acf-hidden image-preview-clone").addClass("acf-gallery-attachment").find("img").attr("src",q.result);m.appendTo(c.$collection());c.uploadImage(r,m)};e++;q.readAsDataURL(a.target.files[h])});e>=l&&this.$("input.images-preview").prop("disabled",!0)},uploadImage:function(a,d){var c=this.$el.parents("form").find("input[name=_acf_nonce]").val(),e=this.get("key"),l=new FormData;
l.append("action","acf/fields/upload_images/add_attachment");l.append("file",a);l.append("field_key",e);l.append("nonce",c);b.ajax({url:acf.get("ajaxurl"),data:acf.prepareForAjax(l),type:"post",processData:!1,contentType:!1,cache:!1}).done(function(g){g.success?(d.attr("data-id",g.data.id).find(".acf-gallery-remove").attr("data-id",g.data.id),g=b("<input>").attr({type:"hidden",name:"acf["+e+"][]",value:g.data.id}),d.prepend(g)):d.addClass("not-valid").append('<p class="errors">'+g.data+"</p>").find(".margin").append('<p class="upload-fail">x</p>')})},
onClickUpload:function(a,d){this.isFull()?this.showNotice({text:acf.__("Maximum selection reached: "+this.$control().data("max")),type:"warning"}):this.$inValid().remove()},appendAttachment:function(a,d){a=this.validateAttachment(a);if(!this.isFull()&&!this.$attachment(a.id).length){var c=['<div class="acf-gallery-attachment" data-id="'+a.id+'">','<input type="hidden" value="'+a.id+'" name="'+this.getInputName()+'[]">','<div class="margin" title=""><div class="thumbnail"><img src="" alt=""></div><div class="filename"></div></div><div class="actions">',
'<a href="#" class="acf-icon -cancel dark acf-gallery-remove" data-id="'+a.id+'"></a>',"</div></div>"].join("");c=b(c);this.$collection().append(c);if("prepend"===this.get("insert")){var e=this.$attachments().eq(d);e.length&&e.before(c)}this.renderAttachment(a);this.render();this.$input().trigger("change")}},validateAttachment:function(a){a=acf.parseArgs(a,{id:"",url:"",alt:"",title:"",filename:"",type:"image"});if(a.attributes){a=a.attributes;var d=acf.isget(a,"sizes",this.get("preview_size"),"url");
null!==d&&(a.url=d)}return a},renderAttachment:function(a){a=this.validateAttachment(a);var d=this.$attachment(a.id);if("image"==a.type)d.find(".filename").remove();else{var c=acf.isget(a,"image","src");null!==c&&(a.url=c);d.find(".filename").text(a.filename)}a.url||(a.url=acf.get("mimeTypeIcon"),d.addClass("-icon"));d.find("img").attr({src:a.url,alt:a.alt,title:a.title});acf.val(d.find("input"),a.id)},editAttachment:function(a){acf.newMediaPopup({mode:"edit",title:acf.__("Edit Image"),button:acf.__("Update Image"),
attachment:a,field:this.get("key"),select:b.proxy(function(d,c){this.renderAttachment(d)},this)})},onClickEdit:function(a,d){var c=d.data("id");c&&this.editAttachment(c)},removeAttachment:function(a){this.closeSidebar();this.$attachment(a).remove();this.render();this.$input().trigger("change")},onClickRemove:function(a,d){a.preventDefault();a.stopPropagation();var c=d.data("id");c?this.removeAttachment(c):d.parents(".acf-gallery-attachment").remove();c=this.$attachments().length;var e=this.$control().data("max");
c<e&&this.$("input.images-preview").prop("disabled",!1)},selectAttachment:function(a){var d=this.$attachment(a);if(!d.hasClass("active")){var c=this.proxy(function(){this.$side().find(":focus").trigger("blur");this.$active().removeClass("active");d.addClass("active");this.openSidebar();e()}),e=this.proxy(function(){var g={action:"acf/fields/gallery/get_attachment",field_key:this.get("key"),id:a};this.has("xhr")&&this.get("xhr").abort();acf.showLoading(this.$sideData());g=b.ajax({url:acf.get("ajaxurl"),
data:acf.prepareForAjax(g),type:"post",dataType:"html",cache:!1,success:l});this.set("xhr",g)}),l=this.proxy(function(g){if(g){var h=this.$sideData();h.html(g);h.find(".compat-field-acf-form-data").remove();h.find("> table.form-table > tbody").append(h.find("> .compat-attachment-fields > tbody > tr"));acf.doAction("append",h)}});c()}},onClickSelect:function(a,d){var c=d.data("id");c&&this.selectAttachment(c)},onClickClose:function(a,d){this.closeSidebar()},onChangeSort:function(a,d){if(!d.hasClass("disabled")){var c=
d.val();if(c){var e=[];this.$attachments().each(function(){e.push(b(this).data("id"))});var l=this.proxy(function(){var h={action:"acf/fields/gallery/get_sort_order",field_key:this.get("key"),ids:e,sort:c};b.ajax({url:acf.get("ajaxurl"),dataType:"json",type:"post",cache:!1,data:acf.prepareForAjax(h),success:g})}),g=this.proxy(function(h){acf.isAjaxSuccess(h)&&(h.data.reverse(),h.data.map(function(r){this.$collection().prepend(this.$attachment(r))},this))});l()}}},onUpdate:function(a,d){var c=this.$(".acf-gallery-update");
if(!c.hasClass("disabled")){var e=acf.serialize(this.$sideData());c.addClass("disabled");c.before('<i class="acf-loading"></i> ');e.action="acf/fields/gallery/update_attachment";b.ajax({url:acf.get("ajaxurl"),data:acf.prepareForAjax(e),type:"post",dataType:"json",complete:function(){c.removeClass("disabled");c.prev(".acf-loading").remove()}})}},onHover:function(){this.addSortable(this);this.off("mouseover")}});acf.registerFieldType(f);acf.registerConditionForFieldType("hasValue","gallery");acf.registerConditionForFieldType("hasNoValue",
"gallery");acf.registerConditionForFieldType("selectionLessThan","gallery");acf.registerConditionForFieldType("selectionGreaterThan","gallery")})(jQuery);jQuery("body").on("input","input.image-preview",function(b){var f=new FileReader,a=jQuery(this);f.onload=function(){a.parents(".hide-if-value").addClass("acfef-hidden").siblings(".show-if-value").addClass("show").find("img").attr("src",f.result)};imagePreview=!0;f.readAsDataURL(b.target.files[0])});
jQuery("body").on("click","a[data-name=remove]",function(b){imagePreview&&jQuery(this).parents(".show-if-value").removeClass("show").siblings(".hide-if-value").removeClass("acfef-hidden").find("input.image-preview").val("")});(function(b,f){var a=acf.models.ImageField.extend({type:"upload_image"});acf.registerFieldType(a)})(jQuery);jQuery(document).on("elementor/popup/show",function(b,f,a){acf.do_action("append",jQuery("#elementor-popup-modal-"+f))});var draft_select=document.getElementById("acfef-form-drafts");null!=draft_select&&(draft_select.onchange=function(){window.location=this.value});function changeTab(b){jQuery(".multi-step.active:not(.step-hidden)").removeClass("active").addClass("step-hidden");jQuery(".multi-step.step-"+b).removeClass("step-hidden").addClass("active");jQuery(".form-tab.active").removeClass("active");jQuery(".form-tab.step-"+b).addClass("active")}
jQuery(".acfef-prev-button").click(function(b){b.preventDefault();b=jQuery(".acfef-prev-button").siblings("input[name=prev_step_link]").val();document.location.href=b});jQuery(".acfef-reply-link").on("click",function(b){b=jQuery(this).attr("data-replyform");var f=jQuery(this).attr("data-commentid"),a=jQuery(this).attr("data-postid");jQuery("#"+b).find("input[name=acfef_parent_comment]").val(f);jQuery("#"+b).find("input[name=acfef_parent_post]").val(a)});
jQuery("body").on('click','.acfef-draft-button',function(b){window.acf.validation.active=!1;jQuery(this).parents('form').find('input[name=_acf_status]').val('draft')});